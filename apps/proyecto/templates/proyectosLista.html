{% extends 'base.html' %}

{% block content %}
<section class="card card-body">

  <div class="d-flex justify-content-between">
    <h1>Listado de Proyectos</h1>
    <a class="btn btn-outline-success heightBtn" href="{% url 'proyecto:nuevo' %}" style="height: 38px">
      {% include "icon/plus.html" %}
      Crear nuevo
    </a>
  </div>

  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}" role="alert">{{ message }}</div>
    {% endfor %}
  {% endif %}

  <table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Titulo</th>
      <th scope="col">Fecha</th>
      <th scope="col">Estado</th>
      <th scope="col">Acci√≥n</th>
    </tr>
  </thead>
  <tbody>
    {% if proyectos %}
      {% for proyecto in proyectos %}

      <tr>
        <th scope="row">{{proyecto.id}}</th>
        <td>{{proyecto.titulo}}</td>
        <td>{{proyecto.presentacion|date:"d-m-Y"}}</td>
        <td>{{proyecto.get_etapa_display}}
           {% if proyecto.estado == 'rechazado' %}
        <span class="badge text-bg-danger">{{ proyecto.get_estado_display }}</span>
          {% elif proyecto.estado == 'observado' %}
        <span class="badge text-bg-warning">{{ proyecto.get_estado_display }}</span>
          {% elif proyecto.estado == 'aceptado' %}
        <span class="badge text-bg-success">{{ proyecto.get_estado_display }}</span>
          {% else %}
        <span class="badge text-bg-primary">{{ proyecto.get_estado_display }}</span>
          {% endif %}
        </td>
        <td>
          <a class="btn btn-outline-primary btn-sm" href="{% url 'proyecto:ver' proyecto.id %}" style="height: 38px">
            Abrir
          </a>
        </td>
      </tr>
      {% endfor %}
    {% else %}
      <tr>
        <th scope="row" colspan="5" class="text-center">No se encontraron registros</th>
      </tr>
    {% endif %}
  </tbody>
</table>
</section>
{% endblock %}