{% extends 'base.html' %}

{% block content %}
<section class="card card-body">

  <div class="d-flex justify-content-between">
    <h1>Reporte de Proyectos</h1>
  </div>

  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}" role="alert">{{ message }}</div>
    {% endfor %}
  {% endif %}

  Cantidad de proyectos iniciados por año:
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th scope="col">Año</th>
        <th scope="col">Cantidad</th>
      </tr>
    </thead>
    <tbody>
      {% if reportes_iniciados %}
        {% for reporte in reportes_iniciados %}

        <tr>
          <td class="col-6" scope="row">{{reporte.año_inicio}}</td>
          <td class="col-6">{{reporte.total_iniciados}}</td>
        </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td scope="row" colspan="2" class="text-center">No se encontraron registros</td>
        </tr>
      {% endif %}
    </tbody>
  </table>


  Cantidad de proyectos finalizados por año:
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th scope="col">Año</th>
        <th scope="col">Cantidad</th>
      </tr>
    </thead>
    <tbody>
      {% if reportes_finalizados %}
        {% for reporte in reportes_finalizados %}
          {% if reporte.año_fin != None %}
            <tr>
              <td class="col-6" scope="row">{{reporte.año_fin}}</td>
              <td class="col-6">{{reporte.total_terminados}}</td>
            </tr>
          {% endif %}
        {% endfor %}
      {% else %}
        <tr>
          <th scope="row" colspan="2" class="text-center">No se encontraron registros</th>
        </tr>
      {% endif %}
    </tbody>
  </table>


  Cantidad de proyectos iniciados y finalizados en el mismo año:
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th scope="col">Año</th>
        <th scope="col">Cantidad</th>
      </tr>
    </thead>
    <tbody>
      {% if reportes_anual %}
        {% for reporte in reportes_anual %}
        <tr>
          <td class="col-6" scope="row">{{reporte.año_inicio}}</td>
          <td class="col-6">{{reporte.total_iniciados_y_terminados}}</td>
        </tr>
        {% endfor %}
      {% else %}
        <tr>
          <th scope="row" colspan="2" class="text-center">No se encontraron registros</th>
        </tr>
      {% endif %}
    </tbody>
  </table>
</section>
{% endblock %}